<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NELL - Order Tracking</title>
    <style>
        /* Shared CSS Variables (Mocking an external style.css) */
        :root {
            --color-primary: #1e40af; /* Tailwind blue-700 */
            --color-secondary: #fcd34d; /* Tailwind amber-300 */
            --color-dark: #1f2937; /* Tailwind gray-800 */
            --color-light: #ffffff;
            --color-success: #10b981; /* Tailwind emerald-500 */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 32px;
            --border-radius-sm: 4px;
            --border-radius-md: 8px;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: var(--color-dark);
            margin: 0;
            padding-top: 60px;
        }
        
        /* Header/Nav Styles */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background-color: var(--color-dark);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 500;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--color-secondary);
            text-decoration: none;
        }

        .desktop-nav ul, .mobile-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
        }

        .desktop-nav li a {
            color: var(--color-light);
            text-decoration: none;
            padding: 8px 15px;
            display: block;
            border-radius: var(--border-radius-sm);
            transition: background-color 0.2s;
        }

        .desktop-nav li a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .mobile-nav, .mobile-menu-icon {
            display: none;
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: var(--spacing-md);
            margin-top: var(--spacing-lg);
            background-color: var(--color-dark);
            color: var(--color-light);
            font-size: 0.8rem;
        }

        /* Tracking Page Styles */
        .tracking-container {
            max-width: 800px;
            margin: var(--spacing-lg) auto;
            padding: var(--spacing-lg);
            background-color: var(--color-light);
            border-radius: var(--border-radius-md);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            color: var(--color-primary);
            font-size: 2rem;
            margin-bottom: var(--spacing-md);
        }

        .status-badge {
            display: inline-block;
            background-color: var(--color-success);
            color: white;
            padding: 8px 16px;
            border-radius: var(--border-radius-md);
            font-weight: bold;
            margin-bottom: var(--spacing-lg);
        }

        .driver-card {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9fafb;
            padding: var(--spacing-md);
            border-radius: var(--border-radius-md);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
        }

        .driver-photo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: var(--spacing-md);
            border: 3px solid var(--color-primary);
        }

        .driver-details h3 {
            margin: 0 0 5px 0;
            color: var(--color-dark);
        }

        .driver-details p {
            margin: 0;
            font-size: 0.9rem;
            color: #6b7280;
        }
        
        .order-summary {
            text-align: left;
            border-top: 1px solid #e5e7eb;
            padding-top: var(--spacing-md);
            margin-top: var(--spacing-md);
        }
        
        .order-summary p {
            margin: 5px 0;
            font-size: 1rem;
        }

        .order-summary strong {
            font-weight: 600;
        }
        
        /* Status Timeline (Simplified) */
        .timeline {
            display: flex;
            justify-content: space-between;
            padding: 20px 0;
            margin-bottom: var(--spacing-lg);
        }
        
        .timeline-step {
            flex: 1;
            text-align: center;
            position: relative;
        }
        
        .timeline-dot {
            width: 15px;
            height: 15px;
            background-color: #d1d5db;
            border-radius: 50%;
            margin: 0 auto 10px;
            transition: background-color 0.5s;
        }
        
        .timeline-step.active .timeline-dot {
            background-color: var(--color-success);
        }

        .timeline-step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 7px;
            left: 50%;
            width: 100%;
            height: 2px;
            background-color: #d1d5db;
            z-index: -1;
        }

        .timeline-step.active:not(:last-child)::after {
            background-color: var(--color-success);
        }

    </style>
    
    <script>
        const DRIVERS = [
            { name: 'Alex M.', rating: 4.9, vehicle: 'Toyota Prius', imageText: 'Driver_Alex', color: '22c55e' },
            { name: 'Maria L.', rating: 4.7, vehicle: 'Honda Civic', imageText: 'Driver_Maria', color: 'f59e0b' },
            { name: 'Sam J.', rating: 4.8, vehicle: 'Ford Focus', imageText: 'Driver_Sam', color: '3b82f6' },
            { name: 'Li W.', rating: 5.0, vehicle: 'Electric Scooter', imageText: 'Driver_Li', color: 'ef4444' }
        ];

        const STATUSES = [
            { text: 'Order Placed', timeOffset: 0 },
            { text: 'Preparing Food', timeOffset: 5 },
            { text: 'Driver En Route', timeOffset: 15 },
            { text: 'Delivered', timeOffset: 30 }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const orderJson = localStorage.getItem('nell_current_order');
            const order = orderJson ? JSON.parse(orderJson) : null;
            
            if (!order) {
                // If no order data, redirect back to the food page
                document.getElementById('trackingContent').innerHTML = `
                    <p style="color: #ef4444; font-size: 1.2rem;">No active order found.</p>
                    <a href="food.html" style="color: var(--color-primary); text-decoration: underline;">Start a New Order</a>
                `;
                return;
            }

            // 1. Assign a random driver
            const driver = DRIVERS[Math.floor(Math.random() * DRIVERS.length)];
            
            // 2. Display Order Summary and Driver Info
            document.getElementById('orderId').textContent = order.id;
            document.getElementById('orderRestaurant').textContent = order.restaurant;
            document.getElementById('orderTotal').textContent = order.total;
            
            document.getElementById('driverName').textContent = driver.name;
            document.getElementById('driverRating').textContent = driver.rating.toFixed(1);
            document.getElementById('driverVehicle').textContent = driver.vehicle;
            document.getElementById('driverPhoto').src = `https://placehold.co/80x80/${driver.color}/ffffff?text=${driver.imageText}`;

            // 3. Status Simulation
            const timelineContainer = document.getElementById('timeline');
            const currentStatusIndex = 2; // Mocking "Driver En Route" as the current active status

            STATUSES.forEach((status, index) => {
                const step = document.createElement('div');
                step.className = `timeline-step${index <= currentStatusIndex ? ' active' : ''}`;
                step.innerHTML = `
                    <div class="timeline-dot"></div>
                    <small>${status.text}</small>
                `;
                timelineContainer.appendChild(step);
            });
            
            // 4. Mock estimated time
            const estimatedMinutes = STATUSES[STATUSES.length - 1].timeOffset - STATUSES[currentStatusIndex].timeOffset;
            document.getElementById('etaText').textContent = `Est. delivery in ${estimatedMinutes}-${estimatedMinutes + 5} mins.`;
            
            // Optional: Clear storage after 5 seconds to simulate delivery completion
            setTimeout(() => {
                localStorage.removeItem('nell_current_order');
                console.log('Order simulation complete. Order data cleared.');
            }, 5000); 
        });
    </script>
</head>
<body>
    <header class="main-header">
        <a href="index.html" class="logo">NELL</a>
        <nav class="desktop-nav">
            <ul>
                <li><a href="index.html">Home</a></li> 
                <li><a href="services.html">Services</a></li>
                <li><a href="city.html">Cities</a></li>
                <li><a href="food.html">Order Food</a></li>
                <li><a href="aboutus.html">About Us</a></li>
                <li><a href="support.html">Support</a></li>
            </ul>
        </nav>
        <div class="mobile-menu-icon">&#9776;</div>
    </header>
    
    <nav class="mobile-nav">
        <!-- Mobile nav links... -->
    </nav>

    <main class="page-content">
        <section class="tracking-container">
            <div id="trackingContent">
                <h1>Order Placed! Your Delivery is on the Way</h1>
                <p id="etaText" style="font-size: 1.1rem; color: #6b7280; font-weight: 500;">Calculating ETA...</p>
                
                <div class="timeline" id="timeline">
                    <!-- Timeline Steps injected here by JS -->
                </div>
                
                <div class="driver-card">
                    <img id="driverPhoto" class="driver-photo" src="https://placehold.co/80x80/22c55e/ffffff?text=Driver" alt="Driver Photo">
                    <div class="driver-details">
                        <h3>Your Driver: <span id="driverName">Loading...</span></h3>
                        <p>Rating: <strong id="driverRating">N/A</strong> &#9733;</p>
                        <p>Vehicle: <span id="driverVehicle">Loading...</span></p>
                    </div>
                </div>

                <div class="order-summary">
                    <h2 style="font-size: 1.25rem; margin-bottom: 10px;">Order Details</h2>
                    <p>Order ID: <strong><span id="orderId">...</span></strong></p>
                    <p>Restaurant: <strong><span id="orderRestaurant">...</span></strong></p>
                    <p>Total: <strong style="color: var(--color-primary);"><span id="orderTotal">...</span></strong></p>
                </div>

                <a href="index.html" class="btn cta-secondary" style="margin-top: var(--spacing-lg);">Return to Home</a>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 NELL, Inc. | All Rights Reserved.</p>
    </footer>
</body>
</html>
